function Main(){function e(e){Config.isAndroid()||(console.log("keyboradSoundControl:",e.play,e.playId),e.play?r?r.play():r=Config.soundPlay("keyboard",-1,.5):r.stop())}function n(){var e=new cjs.Shape;e.graphics.f("#FFFFFF").drawRect(0,0,Core.WIDTH,Core.HEIGHT+100),e.alpha=.02,i.getContainer("clickContent").addChild(e)}function t(e){i.currentPage+=1,i.addScenes("content",i.currentPage)}function o(e){var n=e.currentTarget;switch(n.name){case"start_mc":sendClick("page"+s),n.parent.play(),n.removeEventListener("click",o);break;case"shareClose_mc":i.shareEnabled(!1);break;case"share_mc":sendClick("share"),i.shareEnabled(!0);break;case"home_mc":goHome()}}function a(e){function n(e){t.gotoAndStop(t.frameId>>0)}var t=i.getMc(0).getChildAt(0).getChildAt(0);t.frameId=t.currentFrame,cjs.Tween.get(t,{override:!0}).to({frameId:(100*e>>0)-1},800).addEventListener("change",n)}this.Core_constructor(),Core.FPS=30,Core.WIDTH=800,Core.HEIGHT=960,Core.ISCHACE=!1,Core.PRELOADNUM=1,Core.PRELOADNUM2=2;var i=this;this.init("canvasStage"),this.addContainer("content",0,{type:"showAll",pos:{type:"showMain",hType:"middle",x:0,y:0}}),this.addContainer("clickContent",1,{type:"showAll",pos:{type:"showMain",hType:"top",x:0,y:0}}),this.addContainer("soundContent",2,{type:"bottomRight",pos:{x:10,y:10,width:45,height:45}}),this.addContainer("loadingContent",3,{type:"showAll",pos:{type:"showMain",hType:"middle",x:0,y:0}}),this.addContainer("shareContent",4,{type:"topRight",pos:{x:0,y:0,width:800,height:960}}),Config.eventDispatcher.addEventListener("keyboradSoundControl",e),n();var r,d,s=0;this.transitionMc,this.dataArr=[{id:"loading",childIndex:0,atlas:1,src:[{src:"../media/keyboard.mp3",id:"keyboard"}]},{id:"library",childIndex:0,atlas:1,src:[{src:"../media/bg.mp3",id:"bgSound"}]},{id:"p0",childIndex:1,atlas:3,src:[]},{id:"p1_0",childIndex:1,atlas:1,src:[]},{id:"p1_1",childIndex:1,atlas:1,src:[]},{id:"p2",childIndex:1,atlas:2,src:[]},{id:"p4",childIndex:0,atlas:1,src:[]},{id:"p3",childIndex:0,atlas:1,src:[]}],this.setSource(this.dataArr),this.onPlayEnd=function(e){console.log("onPlayEnd:",e.pageId,e.getChildAt(0).totalFrames);var n=[0,0,2e3,0,2e3,50,50,500];2==e.pageId||4==e.pageId||5==e.pageId||6==e.pageId||7==e.pageId?setTimeout(function(){i.loadingAndTransitionsComplete(),setTimeout(function(){7!=e.pageId&&i.getContainer("content").removeChild(e)},800)},n[e.pageId]):3==e.pageId&&(setTimeout(function(){i.getContainer("content").removeChild(e)},800),i.currentPage+=1,i.addScenes("content",i.currentPage),i.onScenesOutComplete("content"))},this.clickShapeEnabled=function(e){e?i.getContainer("clickContent").addEventListener("click",t):i.getContainer("clickContent").removeEventListener("click",t)},this.addLoading=function(){var e=new libLibrary.PRELOADING;e.x=Core.WIDTH/2,e.y=Core.HEIGHT/2,i.getContainer("loadingContent").addChild(e)},this.loadingEnabled=function(e){e?i.getContainer("loadingContent").visible||(i.getContainer("loadingContent").visible=e):i.getContainer("loadingContent").visible&&(i.getContainer("loadingContent").visible=e)},this.addSound=function(){var e=new libLibrary.SOUNDBTN,n=0;i.getContainer("soundContent").addChild(e),e.addEventListener("click",function(e){console.log(e.currentTarget.currentFrame),0==e.currentTarget.currentFrame?(d&&(n=d.position,d.stop()),e.currentTarget.gotoAndStop(1)):(d=Config.soundPlay("bgSound",-1,.5,n),e.currentTarget.gotoAndStop(0))})},this.addShare=function(){var e=new libLibrary.SHARESP;i.getContainer("shareContent").addChild(e);var n=i.getContainer("shareContent").getChildAt(0);i.addFrameScript(n,n.totalFrames-1,function(){setTimeout(function(){},200)}),this.shareEnabled(!1)},this.shareEnabled=function(e){function n(){i.getContainer("shareContent").visible=!1,t.gotoAndStop(0)}var t=i.getContainer("shareContent").getChildAt(0);t.name="shareClose_mc",e?(i.getContainer("shareContent").visible=!0,i.getContainer("shareContent").alpha=1,t.gotoAndPlay(1),t.addEventListener("click",o)):(cjs.Tween.removeTweens(i.getContainer("shareContent")),cjs.Tween.get(i.getContainer("shareContent"),{override:!0}).to({alpha:0},500).call(n),t.removeEventListener("click",o))},this.loadingInit=function(){divLoadComplete(),this.currentPage=0,this.addScenes("content",this.currentPage)},this.pageInit=function(){this.getMc(1),this.addShare(),this.loadingAndTransitionsComplete()},this.loadingAndTransitionsComplete=function(){i.getMc(0).getChildAt(0).gotoAndStop(s);var e=[99,84,124,79,84,63];console.log("loadingAndTransitionsComplete:",s),setTimeout(function(){var n=i.getMc(0).getChildAt(0).getChildAt(0);i.getContainer("content").addChild(n.parent.parent),0!=s?n.gotoAndPlay(0):(n.gotoAndStop(e[s]),n.start_mc.name="start_mc",n.start_mc.addEventListener("click",o)),5>=s&&(n.word_mc&&(n.word_mc.currentFrame==n.word_mc.totalFrames-1?cjs.Tween.removeTweens(n):i.addFrameScript(n.word_mc,n.word_mc.totalFrames-1,function(){})),i.addFrameScript(n,e[s]-1,function(){n.stop();var e=i.getMc(s+1);e?n.play():(i.currentPage=s+1,i.transitionMc=n),console.log("wait to load stage:",i.currentPage,s,e)}),i.addFrameScript(n,e[s],function(){n.stop(),n.start_mc.name="start_mc",n.start_mc.addEventListener("click",o)})),i.addFrameScript(n,n.totalFrames-1,function(){switch(0!=s&&(1==s?i.currentPage=2:i.currentPage+=1,i.addScenes("content",i.currentPage),i.onScenesOutComplete("content")),n.stop(),5>=s&&i.getContainer("content").removeChild(n.parent.parent),s+=1){case 1:d=Config.soundPlay("bgSound",-1,.5),i.addSound(),i.loadingAndTransitionsComplete();break;case 2:break;case 6:break;case 7:n.share_mc.name="share_mc",n.home_mc.name="home_mc",n.share_mc.addEventListener("click",o),n.home_mc.addEventListener("click",o)}})},500)},this.pageProgress=function(e){a(e)}}function cjsStart(){new Main}cjs.extend(Main,Core);var mainP=Main.prototype;mainP.onLoadProgressHandler=function(e){console.log("Main onLoadProgressHandler:",e),divLoadProgress(100*e>>0)},mainP.onLoadCompleteHandler=function(e){console.log("Main onLoadCompleteHandler"),this.loadingInit(e)},mainP.onPageLoadingProgressHandler=function(e){console.log("onPageLoadingProgressHandler:",e),this.pageProgress(e)},mainP.onPageLoadingCompleteHandler=function(e){console.log("onPageLoadingCompleteHandler"),this.pageInit()},mainP.onPreLoadingProgressHandler=function(e){this.loadingEnabled(!0),console.log("onPreLoadingProgressHandler:",e)},mainP.onPreLoadingCompleteHandler=function(e){console.log("onPreLoadingCompleteHandler: play"),this.loadingEnabled(!1),this.transitionMc.play(),this.onScenesOutComplete("content")},mainP.onScenesPlayEnd=function(e){this.onPlayEnd(e)},mainP.onScenesIn=function(e){},mainP.onScenesOut=function(e){function n(){console.log("onScenesOut:",e.pageId)}var t=this;t.clickShapeEnabled(!1),n()},cjs.promote(Main,"Core");