function Core(){function e(e){}function n(e){var n;t.loadNum<Core.PRELOADNUM?(n=t.loadNum/Core.PRELOADNUM+e.progress*(1/Core.PRELOADNUM),t.onLoadProgressHandler(n)):t.loadNum<Core.PRELOADNUM+Core.PRELOADNUM2?(n=(t.loadNum-Core.PRELOADNUM)/Core.PRELOADNUM2+e.progress*(1/Core.PRELOADNUM2),t.onPageLoadingProgressHandler(n)):t.currentPage==e.currentPage&&t.onPreLoadingProgressHandler(e.progress)}function o(e){t.loadNum+=1,i[e.currentPage]={currentPage:e.currentPage,queue:e.queue,arr:e.arr,thisFun:e.thisFun,mc:void 0},t.loadNum==Core.PRELOADNUM?(t.onLoadCompleteHandler(e),Config.changeMate()):t.loadNum==Core.PRELOADNUM+Core.PRELOADNUM2?t.onPageLoadingCompleteHandler(e):t.currentPage==e.currentPage&&t.onPreLoadingCompleteHandler(e)}var t;t=this,this.init=function(t){Config.CANVAS=document.getElementById(t),stage=new cjs.Stage(Config.CANVAS),stage.update(),cjs.MotionGuidePlugin.install(),cjs.Sound.alternateExtensions=["mp3"],cjs.Touch.enable(stage),cjs.Ticker.setFPS(Core.FPS),cjs.Ticker.addEventListener("tick",stage),a=new cjs.Container,stage.addChild(a),Core.content=a,Config.eventDispatcher.addEventListener(Config.EVENT_LOAD_START,e),Config.eventDispatcher.addEventListener(Config.EVENT_LOAD_PROGRESS,n),Config.eventDispatcher.addEventListener(Config.EVENT_LOAD_COMPLETE,o)},this.setSource=function(e){for(var n=[],o=0;o<e.length;o++){n[o]=[],n[o][0]="/js/"+e[o].id+"/"+e[o].id+".js",n[o][1]="lib"+e[o].id.substr(0,1).toLocaleUpperCase()+e[o].id.substr(1,e[o].id.length-1),n[o][2]="images"+e[o].id.substr(0,1).toLocaleUpperCase()+e[o].id.substr(1,e[o].id.length-1),n[o][3]=e[o].id,n[o][4]=[];for(var t=0;t<e[o].atlas;t++){var r=String(t+1);"1"==r&&(r=""),n[o][4].push({src:Core.spritesheetPath+e[o].id+"/"+e[o].id+"_atlas_"+r+".json",type:"spritesheet",id:e[o].id+"_atlas_"+r})}for(var a=0;a<e[o].src.length;a++)n[o][4].push(e[o].src[a]);n[o][5]=e[o].childIndex}Config.preloading(n)},this.currentPage=0,this.loadNum=0,this.stage;var r,a,i=[];this.addContainer=function(e,n,o){var t=new cjs.Container;t.name=e,a.addChildAt(t,n);var r=o;r.obj=t,Config.resize([r])},this.getContainer=function(e){var n=a.getChildByName(e);return n},this.getMc=function(e){var n,o=i[e];return void 0==o||(void 0==o.mc?(n=o.mc=Config.compositionMc(o.id,o.queue,o.arr,o.thisFun),n.pageId=e,n.getChildAt(0).totalFrames&&t.addFrameScript(n.getChildAt(0),n.getChildAt(0).totalFrames-1,function(e){e.stop(),t.onScenesPlayEnd(e.parent)})):n=o.mc),n},this.addScenes=function(e,n){console.log("addScenes:",n);var o;0==this.getContainer(e).numChildren?(o=this.getMc(n),this.getContainer(e).addChild(o),this.onScenesIn(o)):(r=n,o=this.getContainer(e).getChildAt(0),this.onScenesOut(o))},this.onScenesOutComplete=function(e){var n;n=this.getMc(r),n&&(this.getContainer(e).addChildAt(n,i[r].arr[5]),this.onScenesIn(n))},this.addFrameScript=function(e,n,o){if(!n)return void console.log("addFrameScript:frame==undefined");var t="frame_"+n.toString();e[t]=function(){o(e)},e.timeline.addTween(cjs.Tween.get(e).wait(n).call(e[t]).wait(1))}}Core.FPS=30,Core.WIDTH=800,Core.HEIGHT=1134,Core.OFFICIALPATH="http://game.gtimg.cn/images/qipai/act/a20151210opening/",Core.ISCHACE=!0,Core.PRELOADNUM=1,Core.PRELOADNUM2=2,Core.spritesheetPath="/js/",Core.content;var coreP=Core.prototype;coreP.onLoadProgressHandler=function(e){console.log("onLoadProgressHandler:",e)},coreP.onLoadCompleteHandler=function(e){console.log("onLoadCompleteHandler:",e)},coreP.onPageLoadingProgressHandler=function(e){},coreP.onPageLoadingCompleteHandler=function(e){},coreP.onPreLoadingProgressHandler=function(e){},coreP.onPreLoadingCompleteHandler=function(e){},coreP.onScenesPlayEnd=function(e){console.log("mc play end frame")},coreP.onScenesIn=function(e){},coreP.onScenesOut=function(e){};